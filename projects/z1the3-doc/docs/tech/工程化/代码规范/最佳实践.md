# æ ¼å¼è§„èŒƒå’Œè¯­æ³•æ£€æµ‹å®è·µ

## editorConfig

åœ¨é¡¹ç›®ä¸­å¼•å…¥ editorconfig æ˜¯ä¸ºäº†åœ¨å¤šäººåä½œå¼€å‘ä¸­ä¿æŒä»£ç çš„é£æ ¼å’Œä¸€è‡´æ€§ã€‚ä¸åŒçš„å¼€å‘è€…ä½¿ç”¨ä¸åŒçš„ç¼–è¾‘å™¨æˆ– IDEï¼Œå¯èƒ½ä¼šæœ‰ä¸åŒçš„ç¼©è¿›ï¼ˆæ¯”å¦‚æœ‰çš„äººå–œæ¬¢ 4 ä¸ªç©ºæ ¼ï¼Œæœ‰çš„å–œæ¬¢ 2 ä¸ªç©ºæ ¼ï¼‰ã€æ¢è¡Œç¬¦ã€ç¼–ç æ ¼å¼ç­‰ã€‚ç”šè‡³ç›¸åŒçš„ç¼–è¾‘å™¨å› ä¸ºå¼€å‘è€…è‡ªå®šä¹‰é…ç½®çš„ä¸åŒä¹Ÿä¼šå¯¼è‡´ä¸åŒé£æ ¼çš„ä»£ç ï¼Œè¿™ä¼šå¯¼è‡´ä»£ç çš„å¯è¯»æ€§é™ä½ï¼Œå¢åŠ ä»£ç å†²çªçš„å¯èƒ½æ€§ï¼Œé™ä½äº†ä»£ç çš„å¯ç»´æŠ¤æ€§ã€‚

EditorConfig ä½¿**ä¸åŒç¼–è¾‘å™¨**å¯ä»¥ä¿æŒåŒæ ·çš„é…ç½®ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¾—ä»¥æ— éœ€åœ¨æ¯æ¬¡ç¼–å†™æ–°ä»£ç æ—¶ï¼Œå†ä¾é  Prettier æ¥æŒ‰ç…§å›¢é˜Ÿçº¦å®šæ ¼å¼åŒ–ä¸€éï¼ˆå‡ºç°ä¿å­˜æ—¶æ ¼å¼åŒ–çªç„¶æ”¹å˜çš„æƒ…å†µï¼‰ ã€‚å½“ç„¶è¿™éœ€è¦åœ¨ä½ çš„ IDE ä¸Šå®‰è£…äº†å¿…è¦çš„ EditorConfig æ’ä»¶æˆ–æ‰©å±•ã€‚

### å®‰è£… editorConfig æ’ä»¶

### æ·»åŠ åˆ°å·¥ä½œåŒºå»ºè®®

ç„¶ååœ¨æ’ä»¶çš„ä»‹ç»é¡µä¸Šç‚¹å‡»è®¾ç½®çš„é½¿è½®ï¼Œå¹¶ä¸”é€‰æ‹© Add to Workspace Recommendationsï¼Œå°±å¯ä»¥å°†å…¶åŠ å…¥æ¸…å•ã€‚ä¹Ÿå¯ä»¥ç›´æ¥å¼€å¯ .vscode/extensions.json è¿›è¡Œç¼–è¾‘ï¼š

å‘å›¢é˜Ÿæ¯ä¸€ä½æˆå‘˜å»ºè®®å®‰è£…æ­¤æ’ä»¶
eslint ä¸ prettier æˆ‘ä»¬ä¹Ÿè¿›è¡Œè¿™ä¸€é…ç½®

```json
// .vscode/extensions.json
{
  "recommendations": [
    "editorconfig.editorconfig",
    "dbaeumer.vscode-eslint",
    "esbenp.prettier-vscode"
  ]
}
```

### åœ¨æ ¹ç›®å½•æ–°å»º.editorconfig

```ini
# https://editorconfig.org
root = true # è®¾ç½®ä¸ºtrueè¡¨ç¤ºæ ¹ç›®å½•ï¼Œæ§åˆ¶é…ç½®æ–‡ä»¶ .editorconfig æ˜¯å¦ç”Ÿæ•ˆçš„å­—æ®µ

[*] # åŒ¹é…å…¨éƒ¨æ–‡ä»¶ï¼ŒåŒ¹é…é™¤äº†Â `/`Â è·¯å¾„åˆ†éš”ç¬¦ä¹‹å¤–çš„ä»»æ„å­—ç¬¦ä¸²
charset = utf-8                  # è®¾ç½®å­—ç¬¦ç¼–ç ï¼Œå–å€¼ä¸º latin1ï¼Œutf-8ï¼Œutf-8-bomï¼Œutf-16be å’Œ utf-16leï¼Œå½“ç„¶ utf-8-bom ä¸æ¨èä½¿ç”¨
end_of_line = lf                 # è®¾ç½®ä½¿ç”¨çš„æ¢è¡Œç¬¦ï¼Œå–å€¼ä¸º lfï¼Œcr æˆ–è€… crlf
indent_size = 2                  # è®¾ç½®ç¼©è¿›çš„å¤§å°ï¼Œå³ç¼©è¿›çš„åˆ—æ•°ï¼Œå½“ indexstyle å–å€¼ tab æ—¶ï¼Œindentsize ä¼šä½¿ç”¨ tab_width çš„å€¼
indent_style = space             # ç¼©è¿›é£æ ¼ï¼Œå¯é€‰spaceï½œtab
insert_final_newline = true      # è®¾ä¸ºtrueè¡¨ç¤ºä½¿æ–‡ä»¶ä»¥ä¸€ä¸ªç©ºç™½è¡Œç»“å°¾
trim_trailing_whitespace = true  # åˆ é™¤ä¸€è¡Œä¸­çš„å‰åç©ºæ ¼

[*.md] # åŒ¹é…å…¨éƒ¨ .md æ–‡ä»¶
trim_trailing_whitespace = false
```

å¯ä»¥è§„èŒƒæœ¬é¡¹ç›®ä¸­æ–‡ä»¶çš„ç¼©è¿›é£æ ¼ï¼Œå’Œç¼©è¿›ç©ºæ ¼æ•°ç­‰ï¼Œä¼šè¦†ç›– vscode çš„é…ç½®ï¼Œæ¥è¾¾åˆ°ä¸åŒç¼–è¾‘å™¨ä¸­ä»£ç é»˜è®¤è¡Œä¸ºä¸€è‡´çš„ä½œç”¨ã€‚
VS Code çš„ EditorConfig ç›®å‰æ”¯æŒä¸‹åˆ—å±æ€§ï¼š

indent_style
indent_size
tab_width
end_of_line(on save)
insert_final_newline(on save)
trim_trailing_whitespace(on save)

## eslint

å…³æ³¨ä»£ç è´¨é‡ï¼Œæ£€æŸ¥ä»£ç é£æ ¼

ESLint æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿä¸€ä¸ªå¼€æºçš„ JavaScript çš„ linting å·¥å…·ï¼Œæ˜¯ä¸€ä¸ªåœ¨ JavaScript ä»£ç ä¸­é€šè¿‡è§„åˆ™æ¨¡å¼åŒ¹é…ä½œä»£ç è¯†åˆ«å’ŒæŠ¥å‘Šçš„æ’ä»¶åŒ–çš„æ£€æµ‹å·¥å…·ï¼Œå®ƒçš„ç›®çš„æ˜¯ä¿è¯ä»£ç è§„èŒƒçš„ä¸€è‡´æ€§å’ŒåŠæ—¶å‘ç°ä»£ç é—®é¢˜ã€æå‰é¿å…é”™è¯¯å‘ç”Ÿã€‚å®ƒä½¿ç”¨ espree å°† JavaScript ä»£ç è§£ææˆæŠ½è±¡è¯­æ³•æ ‘ (AST)ï¼Œç„¶åé€šè¿‡ AST æ¥åˆ†ææˆ‘ä»¬ä»£ç ï¼Œä»è€Œç»™äºˆæˆ‘ä»¬ä¸¤ç§æç¤ºï¼š

ä»£ç è´¨é‡é—®é¢˜ï¼šä½¿ç”¨æ–¹å¼æœ‰å¯èƒ½æœ‰é—®é¢˜ï¼Œeslint å¯ä»¥å‘ç°ä»£ç ä¸­å­˜åœ¨çš„å¯èƒ½é”™è¯¯ï¼Œå¦‚ä½¿ç”¨æœªå£°æ˜å˜é‡ã€å£°æ˜è€Œæœªä½¿ç”¨çš„å˜é‡ã€ä¿®æ”¹ const å˜é‡ã€ä»£ç ä¸­ä½¿ç”¨ debugger ç­‰ç­‰
ä»£ç é£æ ¼é—®é¢˜ï¼šé£æ ¼ä¸ç¬¦åˆä¸€å®šè§„åˆ™ï¼Œeslint ä¹Ÿå¯ä»¥ç”¨æ¥ç»Ÿä¸€å›¢é˜Ÿçš„ä»£ç é£æ ¼ï¼Œæ¯”å¦‚åŠ ä¸åŠ åˆ†å·ã€ä½¿ç”¨ tab è¿˜æ˜¯ç©ºæ ¼ã€å­—ç¬¦ä¸²ä½¿ç”¨å•å¼•å· ç­‰ç­‰

```
npm i -D eslint eslint-plugin-react-hooks eslint-plugin-react-refresh @typescript-eslint/parser @typescript-eslint/parser

```

éœ€è¦å‘Šè¯‰ eslint ä½¿ç”¨çš„ react ç‰ˆæœ¬ï¼Œåœ¨ `.eslintrc.js` å’Œ rules å¹³çº§æ·»åŠ  settings é…ç½®ï¼Œè®© eslint è‡ªå·±æ£€æµ‹ react ç‰ˆæœ¬ï¼Œ

```js
// .eslintrc.cjs
module.exports = {
  root: true,
  env: { browser: true, es2020: true },
  extends: [
    /*ä½¿ç”¨eslintæ¨èçš„è§„åˆ™ä½œä¸ºåŸºç¡€é…ç½®ï¼Œå¯ä»¥åœ¨rulesä¸­è¦†ç›–*/
    "eslint:recommended",
    "plugin:@typescript-eslint/recommended",
    "plugin:react-hooks/recommended",
  ],
  ignorePatterns: ["dist", ".eslintrc.cjs"],
  parser: "@typescript-eslint/parser",
  // å¼•å…¥æ’ä»¶ï¼Œä½œç”¨ç±»ä¼¼ require
  plugins: ["react-refresh"],
  rules: {
    "react-refresh/only-export-components": [
      "warn",
      { allowConstantExport: true },
    ],
  },
  //    // å½“è®¿é—®å½“å‰æºæ–‡ä»¶å†…æœªå®šä¹‰çš„å˜é‡æ—¶ï¼Œno-undef è§„åˆ™å°†å‘å‡ºè­¦å‘Šï¼Œ
  //    // å¯ä»¥é€šè¿‡å®šä¹‰å…¨å±€å˜é‡æ¥è§£å†³ã€‚envæä¾›äº†å¤šä¸ªç¯å¢ƒé€‰æ‹©å­—æ®µ
  //    //ä¸€ä¸ªç¯å¢ƒå®šä¹‰äº†ä¸€ç»„é¢„å®šä¹‰çš„å…¨å±€å˜é‡ã€‚globalså¯ä»¥è‡ªå®šä¹‰å•ä¸ªçš„å…¨å±€å˜é‡ã€‚
  // globals: {
  //     "$": "readonly"
  // },
  settings: {
    react: {
      version: "detect",
    },
  },
};
```

### å¢åŠ .eslintignore

```
node_modules
dist
env
.gitignore
pnpm-lock.yaml
README.md
src/assets/*

```

### å¢åŠ  eslint æ£€æµ‹è„šæœ¬

```ini
// --fixï¼šæ­¤é¡¹æŒ‡ç¤º ESLint å°è¯•ä¿®å¤å°½å¯èƒ½å¤šçš„é—®é¢˜ã€‚è¿™äº›ä¿®å¤æ˜¯å¯¹å®é™…æ–‡ä»¶æœ¬èº«è¿›è¡Œçš„ï¼Œåªæœ‰å‰©ä½™çš„æœªä¿®å¤çš„é—®é¢˜æ‰ä¼šè¢«è¾“å‡ºã€‚
{
"lint:eslint": "eslint --fix --ext .j,.ts,.tsx ./src",
}
```

## prettier

```
npm i -D prettier
```

vscode å®‰è£… prettier æ’ä»¶
å…¶å®å®‰è£…å®Œæ’ä»¶å·²ç»å…·æœ‰ prettier çš„èƒ½åŠ›äº†
å…³é”®æ˜¯é¡¹ç›®ä¸­éœ€è¦æœ‰ç»Ÿä¸€é…ç½®

```js
// .prettierrc.js
module.exports = {
  tabWidth: 2, // ä¸€ä¸ªtabä»£è¡¨å‡ ä¸ªç©ºæ ¼æ•°ï¼Œé»˜è®¤å°±æ˜¯2
  useTabs: false, // æ˜¯å¦å¯ç”¨tabå–ä»£ç©ºæ ¼ç¬¦ç¼©è¿›ï¼Œ.editorconfigè®¾ç½®ç©ºæ ¼ç¼©è¿›ï¼Œæ‰€ä»¥è®¾ç½®ä¸ºfalse
  printWidth: 100, // ä¸€è¡Œçš„å­—ç¬¦æ•°ï¼Œå¦‚æœè¶…è¿‡ä¼šè¿›è¡Œæ¢è¡Œ
  semi: false, // è¡Œå°¾æ˜¯å¦ä½¿ç”¨åˆ†å·ï¼Œé»˜è®¤ä¸ºtrue
  singleQuote: true, // å­—ç¬¦ä¸²æ˜¯å¦ä½¿ç”¨å•å¼•å·
  trailingComma: "none", // å¯¹è±¡æˆ–æ•°ç»„æœ«å°¾æ˜¯å¦æ·»åŠ é€—å· none| es5| all
  jsxSingleQuote: true, // åœ¨jsxé‡Œæ˜¯å¦ä½¿ç”¨å•å¼•å·ï¼Œä½ çœ‹ç€åŠ
  bracketSpacing: true, // å¯¹è±¡å¤§æ‹¬å·ç›´æ¥æ˜¯å¦æœ‰ç©ºæ ¼ï¼Œé»˜è®¤ä¸ºtrueï¼Œæ•ˆæœï¼š{ foo: bar }
  arrowParens: "avoid", // ç®­å¤´å‡½æ•°å¦‚æœåªæœ‰ä¸€ä¸ªå‚æ•°åˆ™çœç•¥æ‹¬å·
};
```

```
// .prettierignore
node_modules
dist
env
.gitignore
pnpm-lock.yaml
README.md
```

### vscode ä¿å­˜æ ¼å¼åŒ–

é…ç½®`.vscode/settings.json`

é…ç½®å‰ä¸¤æ­¥åï¼Œè™½ç„¶å·²ç»é…ç½® prettier æ ¼å¼åŒ–è§„åˆ™ï¼Œä½†è¿˜éœ€è¦è®© vscode æ¥æ”¯æŒä¿å­˜åè§¦å‘æ ¼å¼åŒ–ï¼Œåœ¨é¡¹ç›®æ ¹ç›®å½•æ–°å»º .vscode æ–‡ä»¶å¤¹ï¼Œå†…éƒ¨æ–°å»º settings.json æ–‡ä»¶é…ç½®æ–‡ä»¶ï¼Œä»£ç å¦‚ä¸‹ï¼š

```json
{
  "search.exclude": {
    "/node_modules": true,
    "dist": true,
    "pnpm-lock.yaml": true
  },
  "files.autoSave": "onFocusChange",
  "editor.formatOnSave": true,
  "editor.formatOnType": true,
  "editor.defaultFormatter": "esbenp.prettier-vscode",
  "[javascript]": {
    "editor.defaultFormatter": "esbenp.prettier-vscode"
  },
  "[javascriptreact]": {
    "editor.defaultFormatter": "esbenp.prettier-vscode"
  },
  "[typescript]": {
    "editor.defaultFormatter": "esbenp.prettier-vscode"
  },
  "[typescriptreact]": {
    "editor.defaultFormatter": "esbenp.prettier-vscode"
  },
  "[json]": {
    "editor.defaultFormatter": "vscode.json-language-features"
  },
  "[html]": {
    "editor.defaultFormatter": "esbenp.prettier-vscode"
  },
  "[markdown]": {
    "editor.defaultFormatter": "esbenp.prettier-vscode"
  },
  "javascript.validate.enable": false
}
```

### å¢åŠ  prettier è„šæœ¬

```
"lint:prettier": "prettier --write --loglevel warn \"src/**/*.{js,ts,json,tsx,css,less,scss,stylus,html,md}\""

```

"--write": è¡¨ç¤ºå°†æ ¼å¼åŒ–åçš„ç»“æœç›´æ¥å†™å›åŸæ–‡ä»¶ä¸­ï¼Œè€Œä¸æ˜¯è¾“å‡ºåˆ°æ§åˆ¶å°ã€‚
"--loglevel warn": è¡¨ç¤ºåªè¾“å‡ºè­¦å‘Šçº§åˆ«çš„æ—¥å¿—ä¿¡æ¯ã€‚
`"src/**/*.{js,ts,json,tsx,css,less,scss,stylus,html,md}"`: æ˜¯è¦æ ¼å¼åŒ–çš„æ–‡ä»¶çš„è·¯å¾„ï¼Œè¿™é‡ŒæŒ‡å®šäº†åœ¨ **src** ç›®å½•ä¸‹ï¼Œæ‰€æœ‰æ‰©å±•åä¸º `.js`ã€.tsã€.jsonã€.tsxã€.cssã€.lessã€.scssã€.stylusã€.htmlã€.md çš„æ–‡ä»¶ã€‚

### è§£å†³ eslint ä¸ prettier å†²çª

äºŒè€…æ­é…ä½¿ç”¨ï¼ŒESLint å…³æ³¨ä»£ç è´¨é‡ï¼ŒPrettier å…³æ³¨ä»£ç æ ¼å¼ã€‚ä½†æ˜¯äºŒè€…åœ¨æ ¼å¼åŒ–ä¸Šé¢çš„åŠŸèƒ½æœ‰æ‰€äº¤å‰ï¼Œæ‰€ä»¥ Prettier å’Œ ESLint ä¸€èµ·ä½¿ç”¨çš„æ—¶å€™ä¼šæœ‰å†²çªï¼Œè¿™éœ€è¦æˆ‘ä»¬è¿›è¡Œä¸€äº›é…ç½®

å†²çªçš„æœ¬è´¨åœ¨äº eslint æ—¢è´Ÿè´£äº†ä»£ç è´¨é‡æ£€æµ‹ï¼Œåˆè´Ÿè´£äº†ä¸€éƒ¨åˆ†çš„æ ¼å¼ç¾åŒ–å·¥ä½œ,æ ¼å¼åŒ–éƒ¨åˆ†çš„éƒ¨åˆ†è§„åˆ™å’Œ prettier ä¸å…¼å®¹ã€‚ èƒ½ä¸èƒ½è®© eslint åªè´Ÿè´£ä»£ç è´¨é‡æ£€æµ‹è€Œè®© prettier è´Ÿè´£ç¾åŒ–å‘¢? å¥½åœ¨ç¤¾åŒºæœ‰äº†éå¸¸å¥½çš„æˆç†Ÿæ–¹æ¡ˆï¼Œå³ eslint-config-prettier + eslint-plugin-prettierã€‚

eslint-config-prettier çš„ä½œç”¨æ˜¯å…³é—­ eslint ä¸­ä¸ prettier ç›¸äº’å†²çªçš„è§„åˆ™ã€‚
eslint-plugin-prettier çš„ä½œç”¨æ˜¯èµ‹äºˆ eslint ç”¨ prettier æ ¼å¼åŒ–ä»£ç çš„èƒ½åŠ›ã€‚

å®‰è£…ä¾èµ–

```
pnpm add eslint-config-prettier eslint-plugin-prettier -D

```

åœ¨ `.eslintrc.js` çš„ extends ä¸­åŠ å…¥ï¼š

```
  extends: [
    // ...
    'plugin:prettier/recommended', // <==== å¢åŠ ä¸€è¡Œ
  ],
```

:::note
å½“æˆ‘ä»¬ä½¿ç”¨ Prettier + ESLint çš„æ—¶å€™ï¼Œå…¶å®æ ¼å¼é—®é¢˜ä¸¤ä¸ªéƒ½æœ‰å‚ä¸ï¼Œdisable ESLint ä¹‹åï¼Œå…¶å®æ ¼å¼çš„é—®é¢˜å·²ç»å…¨éƒ¨ç”± prettier æ¥æ‰‹äº†ã€‚é‚£æˆ‘ä»¬ä¸ºä»€ä¹ˆè¿˜è¦è¿™ä¸ª pluginï¼Ÿå…¶å®æ˜¯å› ä¸ºæˆ‘ä»¬æœŸæœ›æŠ¥é”™çš„æ¥æºä¾æ—§æ˜¯ ESLint ï¼Œä½¿ç”¨è¿™ä¸ªï¼Œç›¸å½“äºæŠŠ Prettier æ¨èçš„æ ¼å¼é—®é¢˜çš„é…ç½®ä»¥ ESLint rules çš„æ–¹å¼å†™å…¥ï¼Œè¿™æ ·ç›¸å½“äºå¯ä»¥ç»Ÿä¸€ä»£ç é—®é¢˜çš„æ¥æºã€‚
:::

æœ€åå†é…ç½®ä¸€ä¸‹ .vscode/settings.json

## markdownlint

```
pnpm add markdownlint-cli -D
```

### é…ç½® markdownlint(å¯é€‰)

æ–°å¢`.markdownlint.js`
MD034 å’Œ mdx æœ‰å†²çªï¼Œæ‰€ä»¥ç¦ç”¨æ‰

ä¸€äº›è§„èŒƒå‹è§„åˆ™æ— æ³•è‡ªåŠ¨ä¿®å¤ï¼Œéœ€è¦æ‰‹åŠ¨è§£å†³ï¼Œå› æ­¤ä¹Ÿç¦æ‰

```js
{
  "default": true,
  "MD034": false,
  "MD013": false,
  "MD040":false,
  "MD025":false,
  "MD001":false,
  "MD033": false,
  "MD041": false,
  "MD029": false,
  "MD045": false,
  "MD024": false,
  "MD036": false,
  "MD028": false
}

```

åç§°å¯ä»¥æ˜¯ defaultã€ ruleã€ alias æˆ– tagsï¼š

defaultï¼šç‰¹æ®Šå±æ€§ï¼Œè®¾ä¸º Â trueÂ  ä¼šå¯ç”¨æ‰€æœ‰è§„åˆ™ï¼Œåä¹‹è®¾ä¸º Â falseÂ  åˆ™å…³é—­æ‰€æœ‰è§„åˆ™
ruleï¼šè§„åˆ™åç§°ï¼Œå¯¹åº”è‡³å„ä¸ªè§„åˆ™ï¼Œåƒæ˜¯èŒƒä¾‹ä¸­çš„ Â MD001Â  ä¸ MD003
aliasï¼šè§„åˆ™åˆ«ç§°ï¼Œå¯¹åº”è‡³å„ä¸ªè§„åˆ™çš„åˆ«åï¼Œä¾‹å¦‚èŒƒä¾‹ä¸­çš„ Â first-line-headingÂ  æ˜¯è§„åˆ™ Â MD041Â  çš„åˆ«å
tagsï¼šä½œç”¨çš„æ ‡ç­¾ï¼Œå¯¹åº”è‡³å„è§„åˆ™çš„æ‰€å±æ ‡ç­¾ï¼Œå¯ä»¥å°†å…¶è§†ä¸ºè§„åˆ™çš„ç¾¤ç»„ï¼Œä¾‹å¦‚èŒƒä¾‹ä¸­çš„ Â atx_closedÂ  åŒ…æ‹¬äº† Â MD020Â  ä¸ Â MD021Â  ä¸¤ä¸ªè§„åˆ™

### æ–°å»º .markdownlintignore

```
node_modules
dist
env
.gitignore
pnpm-lock.yaml
src/assets/*
.vscode
public
.github

```

### åŠ å…¥ scripts

```json
{
  "lint:md": "markdownlint --config -fix .markdownlint.js ."
}
```

### vscode è‡ªåŠ¨ä¿å­˜

```
{
    // ...
    "editor.codeActionsOnSave": {
        "source.fixAll.markdownlint": true
    }
}

```

## stylelint

æ ¼å¼åŒ– css

### å®‰è£…æ’ä»¶åŠä¾èµ–

### æ–°å»º.stylelintrc.js

```js
module.exports = {
  extends: [
    "stylelint-config-standard",
    "stylelint-prettier/recommended",
    "stylelint-config-rational-order",
  ],
  rules: {
    "function-name-case": ["lower"],
    "function-no-unknown": [
      true,
      {
        ignoreFunctions: [
          "fade",
          "fadeout",
          "tint",
          "darken",
          "ceil",
          "fadein",
          "floor",
          "unit",
          "shade",
          "lighten",
          "percentage",
          "-",
        ],
      },
    ],
    "import-notation": null,
    "no-descending-specificity": null,
    "no-invalid-position-at-import-rule": null,
    "declaration-empty-line-before": null,
    "keyframes-name-pattern": null,
    "custom-property-pattern": null,
    "number-max-precision": 8,
    "alpha-value-notation": "number",
    "color-function-notation": "legacy",
    "selector-class-pattern": null,
    "selector-id-pattern": null,
    "selector-not-notation": null,
  },
};
```

### æ–°å»º.stylelintignore

```ini
dist
public
env
build
.vscode
.husky
.DS_Store
.github
typings
README.md
node_modules


```

### vscode ä¿å­˜æ ¼å¼åŒ–

```json
{
  // ...
  "editor.codeActionsOnSave": {
    "source.fixAll.stylelint": true
  },
  "stylelint.validate": ["css", "less", "sass", "stylus", "postcss"]
}
```

## husky + lint-staged

### ä½¿ç”¨ lint-staged ä¼˜åŒ–æ£€æµ‹é€Ÿåº¦

è®© eslint å’Œ prettier åªæ£€æµ‹æš‚å­˜åŒºçš„æ–‡ä»¶

```
pnpm add lint-staged -D
```

åœ¨ package.json æ·»åŠ  lint-staged é…ç½®
(é€‚ç”¨äº react)

æ£€æµ‹æ˜¯å…¨éƒ¨æ£€æµ‹ï¼Œä½†æ˜¯ä¿®æ”¹åªå¯¹æš‚å­˜åŒºæ–‡ä»¶åšå¤„ç†

```
"lint-staged": {
  "src/**/*.{ts,tsx}": [
    "pnpm run lint:eslint",
    "pnpm run lint:prettier"
  ]
},

```

## tsc

ä¸€äº›ç±»å‹é”™è¯¯å¯èƒ½ eslint æ£€æµ‹ä¸å‡ºæ¥ï¼Œå¯èƒ½éœ€è¦å®‰è£… tsc

å…³é—­ tsc çš„ emit åŠŸèƒ½ï¼Œåªåšç±»å‹æ£€æµ‹å’Œä¿®å¤ï¼Œä¸ç¼–è¯‘

### é…ç½® husky

ä¸ºäº†é¿å…æŠŠä¸è§„èŒƒçš„ä»£ç æäº¤åˆ°è¿œç¨‹ä»“åº“ï¼Œä¸€èˆ¬ä¼šåœ¨ git æäº¤ä»£ç æ—¶å¯¹ä»£ç è¯­æ³•è¿›è¡Œæ£€æµ‹ï¼Œåªæœ‰æ£€æµ‹é€šè¿‡æ—¶æ‰èƒ½è¢«æäº¤ï¼Œgit æä¾›äº†ä¸€ç³»åˆ—çš„ githooksï¼Œè€Œæˆ‘ä»¬éœ€è¦å…¶ä¸­çš„ pre-commit é’©å­ï¼Œå®ƒä¼šåœ¨ git commit æŠŠä»£ç æäº¤åˆ°æœ¬åœ°ä»“åº“ä¹‹å‰æ‰§è¡Œï¼Œå¯ä»¥åœ¨è¿™ä¸ªé˜¶æ®µæ£€æµ‹ä»£ç ï¼Œå¦‚æœæ£€æµ‹ä¸é€šè¿‡å°±é€€å‡ºå‘½ä»¤è¡Œè¿›ç¨‹åœæ­¢ commitã€‚

è€Œ husky å°±æ˜¯å¯ä»¥ç›‘å¬ githooks çš„å·¥å…·ï¼Œå¯ä»¥å€ŸåŠ©å®ƒæ¥å®Œæˆè¿™ä»¶äº‹æƒ…ã€‚

```
pnpm add husky -D
```

ä¸ºä»€ä¹ˆä¸ç›´æ¥åœ¨æäº¤æ—¶æ‰§è¡Œè„šæœ¬ï¼Œè€Œæ˜¯é‡‡ç”¨ huskyï¼Ÿ

é‡‡ç”¨ husky åªæ˜¯åœ¨æäº¤å‰è¿›è¡Œæ£€æµ‹ï¼Œè€Œä¸æ˜¯ä¿®å¤æ“ä½œ

å¦‚æœæ£€æµ‹åˆ°æœªä¿®å¤çš„åœ°æ–¹ï¼Œä¼š**ç»ˆæ­¢æäº¤**

ç›´æ¥åœ¨æäº¤æ—¶æ‰§è¡Œè„šæœ¬ï¼Œæäº¤ä¸Šå»çš„è¿˜æ˜¯æœªä¿®å¤çš„ä»£ç 

### pre-commit é’©å­

æ–°ç‰ˆçš„ husky ä½¿ç”¨æœ‰äº›å˜åŒ–ï¼Œä¸å†æ˜¯ç›´æ¥åœ¨ package.json ä¸­è¿›è¡Œé…ç½®ã€‚

```
npx husky install
```

åœ¨.husky ç›®å½•ä¸‹æ–°å¢ pre-commit æ–‡ä»¶

(æ³¨æ„ä¸æ˜¯.husky/\_ç›®å½•)

```
. "$(dirname "$0")/_/husky.sh"

npx --no-install lint-staged
```

å…³äº husky install å®˜ç½‘æ¨èçš„æ˜¯åœ¨ packgae.json ä¸­æ·»åŠ  prepare è„šæœ¬
ï¼Œprepare è„šæœ¬ä¼šåœ¨ npm installï¼ˆä¸å¸¦å‚æ•°ï¼‰ä¹‹åè‡ªåŠ¨æ‰§è¡Œã€‚

è¿™æ ·å°‘è¾“ä¸€æ¬¡å‘½ä»¤ï¼Œç›¸å½“äºæŠŠè„šæ‰‹æ¶åˆå§‹åŒ–å‘½ä»¤æ”¾åˆ° npm install ä¸­

```
{
  "scripts": {
    "prepare": "husky install"
  }
}
```

## commitlint

å¯¹ commit message è¿›è¡Œè§„èŒƒæ£€æµ‹

commit conventions è§„èŒƒ

https://www.conventionalcommits.org/en/v1.0.0/

```
pnpm add @commitlint/cli -D
```

æ–°å»º`commitlint.config.js`

å®‰è£… commitlint çš„é¢„è®¾è§„åˆ™åŒ…

```
pnpm add @commitlint/config-conventional -D

```

ä½¿ç”¨è§„åˆ™åŒ…

```js
module.exports = {
  extends: ["@commitlint/config-conventional"],
  // ...
};
```

æ¶‰åŠä»¥ä¸‹è§„åˆ™åŒ…

`https://github.com/conventional-changelog/commitlint/blob/5403f0b5bcab43803708997c482a44a7d1151480/@commitlint/config-conventional/index.js`

### åœ¨ husky ä¸­ä¸º commitlint æ³¨å†Œ git hooks ç›‘å¬

```
npx husky add .husky/commit-msg 'npx --no-install commitlint --edit "$1"'
```

ä¿®æ”¹å®Œåï¼Œè¦é‡æ–°æ³¨å†Œ Git hooksï¼š

```
npx husky install
```

## commitizen è§„èŒƒæäº¤

`commitizen` å¯ä»¥ç”¨**è½®è¯¢äº¤äº’**çš„æ–¹å¼å¸®æˆ‘ä»¬ç”Ÿæˆç¬¦åˆè§„èŒƒçš„`commit message`

### å…¨å±€å®‰è£…

1. å…¨å±€ä¸‹è½½ä¸¤ä¸ªåŒ…
   `npm install -g commitizen cz-conventional-changelog`

2. åˆ›å»º ~/.czrc æ–‡ä»¶ï¼Œå†™å…¥å¦‚ä¸‹å†…å®¹
   `{ "path": "cz-conventional-changelog" }`

3. è¿™æ—¶å°±å¯ä»¥å…¨å±€ä½¿ç”¨ git cz å‘½ä»¤æ¥**ä»£æ›¿** git commit å‘½ä»¤äº†

### é¡¹ç›®å†…å®‰è£…

1. å®‰è£… commitizen, dev ä¾èµ–
   `npm install --save-dev commitizen`
   `npm install --save-dev cz-conventional-changelog`

2. é…ç½®ï¼Œæ‰“å¼€é¡¹ç›®çš„ package.json æ–‡ä»¶ï¼Œé…ç½®å¦‚ä¸‹

```
 {
  "scripts": {
    "commit": "git-cz",
  },
  "config": {
    "commitizen": {
      "path": "node_modules/cz-conventional-changelog"
    }
  }
}
```

3. ä½¿ç”¨ npm run commit ä»£æ›¿ git commit

## change-log

å®‰è£… standard-version

https://github.com/conventional-changelog/standard-version

```
pnpm add standard-version -D
```

è‡ªåŠ¨åŒ–å‡çº§ç‰ˆæœ¬å·ã€ç”Ÿæˆ changelog åŠ tag

æ·»åŠ åˆ° package.json è„šæœ¬å‘½ä»¤

```json
"scripts": {
    // ...
    "release": "standard-version"
}

```

é€šè¿‡ pnpm run releaseï¼Œç”Ÿæˆæ—¥å¿—ã€‚

### è‡ªåŠ¨å‡çº§ç‰ˆæœ¬

1. ç‰ˆæœ¬æ„æˆ
   ç‰ˆæœ¬å· major.minor.patch

ä¸»ç‰ˆæœ¬å·.æ¬¡ç‰ˆæœ¬å·.ä¿®è®¢å·ï¼Œç‰ˆæœ¬å·é€’å¢è§„åˆ™å¦‚ä¸‹ï¼š

ä¸»ç‰ˆæœ¬å·(major)ï¼šå½“ä½ åšäº†ä¸å…¼å®¹çš„ API ä¿®æ”¹ï¼Œ
æ¬¡ç‰ˆæœ¬å·(minor)ï¼šå½“ä½ åšäº†å‘ä¸‹å…¼å®¹çš„åŠŸèƒ½æ€§æ–°å¢ï¼Œå¯ä»¥ç†è§£ä¸º Feature ç‰ˆæœ¬ï¼Œ
ä¿®è®¢å·(patch)ï¼šå½“ä½ åšäº†å‘ä¸‹å…¼å®¹çš„é—®é¢˜ä¿®æ­£ï¼Œå¯ä»¥ç†è§£ä¸º Bug fix ç‰ˆæœ¬ã€‚

å…ˆè¡Œç‰ˆæœ¬å·å¯ä»¥åŠ åˆ° â€œä¸»ç‰ˆæœ¬å·.æ¬¡ç‰ˆæœ¬å·.ä¿®è®¢å·â€ çš„åé¢ï¼Œä½œä¸ºå»¶ä¼¸ã€‚

å…ˆè¡Œç‰ˆæœ¬
å½“å³å°†å‘å¸ƒå¤§ç‰ˆæœ¬æ”¹åŠ¨å‰ï¼Œä½†æ˜¯åˆä¸èƒ½ä¿è¯è¿™ä¸ªç‰ˆæœ¬çš„åŠŸèƒ½ 100% æ­£å¸¸ï¼Œè¿™ä¸ªæ—¶å€™å¯ä»¥å‘å¸ƒå…ˆè¡Œç‰ˆæœ¬ï¼š

alpha: å†…éƒ¨ç‰ˆæœ¬
beta: å…¬æµ‹ç‰ˆæœ¬
rc: å€™é€‰ç‰ˆæœ¬(Release candiate)

æ¯”å¦‚ï¼š1.0.0-alpha.0ã€1.0.0-alpha.1ã€1.0.0-rc.0ã€1.0.0-rc.1 ç­‰ã€‚

standard-verstion ç”Ÿæˆçš„ CHANGELOG åªä¼šåŒ…å« featã€fixã€BREACK-CHANGE ç±»å‹çš„æäº¤è®°å½•

```json
{
  "scripts": {
    "release": "standard-version",
    // æ‰‹åŠ¨æ§åˆ¶ç‰ˆæœ¬æ›´æ–°
    "release:alpha": "standard-version --prerelease alpha",
    "release:rc": "standard-version --prerelease rc",
    "release:major": "pnpm run release -- --release-as major",
    "release:minor": "pnpm run release -- --release-as minor",
    "release:patch": "pnpm run release -- --release-as patch"
  }
}
```

ç¬¬ä¸€ä¸ªç‰ˆæœ¬(è¯¥æ–¹å¼ä¸ä¼šå‡çº§ç‰ˆæœ¬å·)

```
pnpm run release -- --first-release
```

### é…ç½®å“ªäº› commit æ¶ˆæ¯å†™å…¥ changelog

hidden å±æ€§å€¼æ§åˆ¶æ˜¯å¦å°†è¯¥ç±»å‹çš„ commit æ¶ˆæ¯å†™å…¥ changlog, ä¸å¡«çš„æƒ…å†µä¸‹é»˜è®¤æ˜¯: falseï¼Œåœ¨æ ¹ç›®å½•ä¸‹æ–°å»º .versionrc.jsï¼š

```js
module.exports = {
  types: [
    { type: "feat", section: "âœ¨ Features | æ–°åŠŸèƒ½" },
    { type: "fix", section: "ğŸ› Bug Fixes | Bug ä¿®å¤" },
    { type: "init", section: "ğŸ‰ Init | åˆå§‹åŒ–" },
    { type: "docs", section: "âœï¸ Documentation | æ–‡æ¡£" },
    { type: "style", section: "ğŸ’„ Styles | é£æ ¼" },
    { type: "refactor", section: "â™»ï¸ Code Refactoring | ä»£ç é‡æ„" },
    { type: "perf", section: "âš¡ Performance Improvements | æ€§èƒ½ä¼˜åŒ–" },
    { type: "test", section: "âœ… Tests | æµ‹è¯•" },
    { type: "revert", section: "âª Revert | å›é€€", hidden: true },
    { type: "build", section: "ğŸ“¦â€ Build System | æ‰“åŒ…æ„å»º" },
    { type: "chore", section: "ğŸš€ Chore | æ„å»º/å·¥ç¨‹ä¾èµ–/å·¥å…·" },
    { type: "ci", section: "ğŸ‘· Continuous Integration | CI é…ç½®" },
  ],
};
```

### é…ç½®è·³è¿‡ç”Ÿæˆ changelog è¿™ä¸ªæ­¥éª¤

æ‰€æœ‰å¯é…ç½®è·³è¿‡çš„æœ‰: bump, changelog, commit, tag:

```json
{
  "standard-version": {
    "skip": {
      "changelog": true
    }
  }
}
```

ä½œè€…ï¼š\_ä½ å½“åƒé¸Ÿé£å¾€ä½ çš„å±±
é“¾æ¥ï¼šhttps://juejin.cn/post/7207374216126922809
æ¥æºï¼šç¨€åœŸæ˜é‡‘
è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚

## æ‰©å±•

- JS Linter è¿›åŒ–å²
  https://zhuanlan.zhihu.com/p/34656263
- ESLint å·¥ä½œåŸç†æ¢è®¨
  https://zhuanlan.zhihu.com/p/53680918
- å‰ç«¯ç§‘æ™®ç³»åˆ—(5):ESLint - å®ˆä½ä¼˜é›…çš„æŠ¤åŸæ²³ - æ˜é‡‘
  https://juejin.cn/post/6886265504378388487
- AST in Modern JavaScript
  https://zhuanlan.zhihu.com/p/32189701
- æœ€å…¨çš„ Eslint é…ç½®æ¨¡æ¿ï¼Œä»æ­¤ç»Ÿä¸€å›¢é˜Ÿçš„ç¼–ç¨‹ä¹ æƒ¯ - æ˜é‡‘
  https://juejin.cn/post/6844903859488292871#heading-10
- æ‰‹æ‘¸æ‰‹æ•™ä½ å†™ä¸ª ESLint æ’ä»¶ä»¥åŠäº†è§£ ESLint çš„è¿è¡ŒåŸç† - æ˜é‡‘
  https://juejin.cn/post/6844904016363667469#heading-24
- husky ä½¿ç”¨æ€»ç»“
  https://zhuanlan.zhihu.com/p/366786798
